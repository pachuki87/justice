# CONFIGURACIÓN DE BASE DE DATOS - PLANTILLA SEGURA
# COPIAR ESTE ARCHIVO COMO .env Y COMPLETAR CON VALORES REALES
# IMPORTANTE: No incluir este archivo .env en el control de versiones

# Configuración de conexión a base de datos PostgreSQL
DB_HOST=tu_host_de_base_de_datos
DB_PORT=5432
DB_NAME=nombre_de_tu_base_de_datos
DB_USER=tu_usuario_postgres
# CONTRASEÑA: Establecer una contraseña segura
DB_PASSWORD=tu_contraseña_segura

# URL completa construida con variables de entorno
DATABASE_URL=postgres://${DB_USER}:${DB_PASSWORD}@${DB_HOST}:${DB_PORT}/${DB_NAME}?sslmode=require

# Configuración SSL - IMPORTANTE: Usar sslmode=require en producción
DB_SSL=true
DB_SSL_MODE=require
DB_SSL_REJECT_UNAUTHORIZED=true

# Configuración avanzada de seguridad SSL
# En producción, estas variables deben ser 'true'
SSL_VERIFY_CERTIFICATE=true
SSL_CHECK_HOSTNAME=true

# Configuración de seguridad JWT - CRÍTICO PARA LA SEGURIDAD
# Generar con: node -e "const crypto = require('crypto'); console.log(crypto.randomBytes(64).toString('hex'));"
# NUNCA usar valores por defecto o predecibles
# MÍNIMO 64 caracteres (128 bits) recomendado 128 caracteres (256 bits)
JWT_SECRET=generar_secreto_jwt_aleatorio_de_128_caracteres_hexadecimal

# Configuración de seguridad de contraseñas - CRÍTICO
# Generar con: node -e "const crypto = require('crypto'); console.log(crypto.randomBytes(64).toString('hex'));"
# MÍNIMO 32 caracteres (256 bits) recomendado 64 caracteres (512 bits)
PASSWORD_PEPPER=generar_pepper_secreto_aleatorio_de_64_caracteres_hexadecimal

# Configuración adicional de seguridad
NODE_ENV=production
API_RATE_LIMIT=100
SESSION_SECRET=generar_secreto_de_sesion_aleatorio_y_seguro

# CONFIGURACIÓN DE URLS DEL FRONTEND - CRÍTICO PARA SEGURIDAD
# IMPORTANTE: Estas URLs deben configurarse para evitar exposición de credenciales
# Usar variables de entorno en lugar de URLs hardcodeadas en el código

# URL del servidor de API para producción
# Reemplazar con el dominio real del servidor de producción
PRODUCTION_API_URL=https://tu-dominio-de-produccion.com/api

# URLs de validación de tokens JWT (issuers válidos)
# Estas URLs se usan para validar el campo 'iss' de los tokens JWT
VALID_JWT_ISSUERS=https://tu-dominio-de-produccion.com,http://localhost:8000

# URL del servidor de desarrollo local
# Usar para desarrollo local y pruebas
DEVELOPMENT_API_URL=http://localhost:8000

# URL base del frontend para desarrollo
# Usar para redirecciones y referencias internas
FRONTEND_BASE_URL=http://localhost:3000

# Configuración de entorno por defecto
# 'auto' para detección automática, 'development' o 'production' para forzar
DEFAULT_ENVIRONMENT=auto

# Instrucciones de seguridad:
# 1. Copiar este archivo como .env
# 2. Completar con valores reales y seguros
# 3. Asegurar que .env esté en .gitignore
# 4. Usar contraseñas fuertes (mínimo 16 caracteres con símbolos)
# 5. Generar secrets únicos para JWT y sesión
# 6. En producción, usar variables de entorno del sistema en lugar de archivo .env
# 7. NUNCA usar rejectUnauthorized: false en producción
# 8. Verificar que los certificados SSL sean válidos y emitidos por CA confiables
# 9. Configurar apropiadamente la cadena de confianza SSL/TLS
# 10. Monitorear regularmente la validez de los certificados SSL
# 11. CRÍTICO: PASSWORD_PEPPER debe ser diferente en cada instalación
# 12. CRÍTICO: Rotar PASSWORD_PEPPER periódicamente (cada 6-12 meses)
# 13. CRÍTICO: Guardar PASSWORD_PEPPER en lugar seguro (gestor de secrets, no en código)
# 14. CRÍTICO: Si PASSWORD_PEPPER se compromete, rehashear todas las contraseñas